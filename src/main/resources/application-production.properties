# ===============================
# = DATA SOURCE (Production)
# ===============================
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driverClassName=org.postgresql.Driver

# HikariCP Production Settings
spring.datasource.hikari.schema=${DATABASE_SCHEMA:kavun}
spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# ===============================
# = JPA / HIBERNATE (Production)
# ===============================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.generate_statistics=false
spring.sql.init.mode=never
# ===============================
# = LOGGING (Production)
# ===============================
# Production logging - minimal, WARN level, syslog enabled
logging.level.root=WARN
logging.level.com.kavun=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.orm.jdbc.bind=WARN
logging.level.liquibase=WARN

# Syslog configuration for centralized logging (QRadar/SIEM)
syslog.host=${SYSLOG_HOST}
syslog.port=${SYSLOG_PORT:514}
# ===============================
# = EMAIL CONFIGURATION (Production)
# ===============================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:noreply@kavun.com}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.protocol=smtp

# SSL Configuration
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.socketFactory.port=587
spring.mail.properties.mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
spring.mail.properties.mail.smtp.socketFactory.fallback=false

# SSL Trust Configuration (fixes certificate validation)
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2 TLSv1.3

# TLS Configuration
spring.mail.properties.mail.smtp.starttls.enable=true

# Connection timeouts
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ===============================
# = SECURITY & SERVER (Production)
# ===============================
spring.h2.console.enabled=false
server.forward-headers-strategy=framework

# Security headers
server.error.include-stacktrace=never
server.error.include-message=never
server.error.include-binding-errors=never

# Cache control
spring.thymeleaf.cache=true
spring.web.resources.cache.cachecontrol.max-age=31536000
spring.web.resources.cache.cachecontrol.must-revalidate=true
