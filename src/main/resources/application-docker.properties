# ===============================
# = DATA SOURCE (Docker)
# ===============================
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://postgres-db:5432/kavun}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:postgres}
spring.datasource.driverClassName=org.postgresql.Driver

# HikariCP Docker Settings (optimized for containers)
spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:2}
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ===============================
# = JPA / HIBERNATE (Docker)
# ===============================
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.highlight_sql=true
spring.jpa.properties.hibernate.generate_statistics=false

# ===============================
# = THYMELEAF
# ===============================
# Whether to enable template caching.
spring.thymeleaf.cache=false

# ===============================
# = LOGGING (Docker)
# ===============================
# Container-optimized logging - INFO level with syslog support
logging.level.root=INFO
logging.level.com.kavun=${LOGGING_LEVEL:INFO}
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.orm.jdbc.bind=WARN
logging.level.liquibase=WARN

# Syslog configuration for container logging
syslog.host=${SYSLOG_HOST:localhost}
syslog.port=${SYSLOG_PORT:514}

# ===============================
# = EMAIL CONFIGURATION (Docker)
# ===============================
spring.mail.host=localhost
spring.mail.port=465
spring.mail.username=noreply@kavun.com
spring.mail.password=your_password
spring.mail.protocol=smtp

# SSL Configuration
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.socketFactory.port=465
spring.mail.properties.mail.smtp.socketFactory.class=javax.net.ssl.SSLSocketFactory
spring.mail.properties.mail.smtp.socketFactory.fallback=false

# SSL Trust Configuration (fixes certificate validation)
spring.mail.properties.mail.smtp.ssl.trust=localhost
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2 TLSv1.3

# TLS Configuration
spring.mail.properties.mail.smtp.starttls.enable=true

# Connection timeouts
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Forward Headers Strategy
server.forward-headers-strategy=framework
